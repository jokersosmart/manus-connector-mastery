# Supabase API 連接器使用說明報告

**作者：Joker**

本報告提供 Manus MCP 連結器「Supabase API」的詳細使用說明，包含其所有可用工具 (tools) 的詳細參數、功能說明、使用範例和預期輸出。

## 總覽

Supabase API 連接器提供了一套強大的工具，讓使用者可以透過自然語言指令，直接與您的 Supabase 後端進行互動，涵蓋了資料庫、身份驗證和儲存三大核心功能。本連接器旨在簡化開發流程，讓不熟悉程式碼的使用者也能輕鬆管理和操作 Supabase 專案。

## 可用工具 (Tools)

### 資料庫 (Database)

#### 1. `list_tables`

- **功能說明**：列出 Supabase 資料庫中所有可用的資料表 (tables)。
- **參數**：無。
- **使用範例**：
  ```
  列出我資料庫裡所有的資料表
  ```
- **預期輸出**：一個包含所有資料表名稱的清單。

#### 2. `get_rows`

- **功能說明**：從指定的資料表中檢索資料列 (rows)。支援篩選、排序和選擇特定欄位。
- **參數**：
  - `table_name` (字串, 必要): 要查詢的資料表名稱。
  - `columns` (字串, 選用): 要回傳的欄位，以逗號分隔。預設為 `*` (所有欄位)。
  - `filter` (字串, 選用): 查詢篩選條件，格式為 `欄位,運算子,值` (例如：`id,eq,1`)。
  - `order` (字串, 選用): 排序方式，格式為 `欄位,asc|desc`。
- **使用範例**：
  ```
  從 "products" 資料表中找出所有價格大於 100 的商品，並依照價格降序排列，只顯示商品名稱和價格。
  ```
- **預期輸出**：一個包含符合條件的資料列的 JSON 物件陣列。

#### 3. `insert_rows`

- **功能說明**：將一或多筆新的資料列插入指定的資料表中。
- **參數**：
  - `table_name` (字串, 必要): 要插入資料的資料表名稱。
  - `data` (JSON, 必要): 一個或多個要插入的資料列物件陣列。
- **使用範例**：
  ```
  在 "users" 資料表中新增一筆使用者資料，名稱是 'John Doe'，信箱是 'john.doe@example.com'。
  ```
- **預期輸出**：成功插入的資料列內容。

#### 4. `update_rows`

- **功能說明**：根據篩選條件，更新指定資料表中的現有資料列。
- **參數**：
  - `table_name` (字串, 必要): 要更新資料的資料表名稱。
  - `filter` (字串, 必要): 查詢篩選條件，用以指定要更新的資料列。
  - `data` (JSON, 必要): 要更新的欄位和新值。
- **使用範例**：
  ```
  在 "orders" 資料表中，將訂單 ID 為 '12345' 的訂單狀態更新為 'shipped'。
  ```
- **預期輸出**：成功更新的資料列內容。

#### 5. `delete_rows`

- **功能說明**：根據篩選條件，從指定的資料表中刪除資料列。
- **參數**：
  - `table_name` (字串, 必要): 要刪除資料的資料表名稱。
  - `filter` (字串, 必要): 查詢篩選條件，用以指定要刪除的資料列。
- **使用範例**：
  ```
  從 "tasks" 資料表中刪除所有狀態為 'completed' 的任務。
  ```
- **預期輸出**：成功刪除的資料列內容。

#### 6. `call_function`

- **功能說明**：呼叫 Supabase 資料庫中的一個遠端程序呼叫 (RPC) 函式。
- **參數**：
  - `function_name` (字串, 必要): 要呼叫的函式名稱。
  - `args` (JSON, 選用): 傳遞給函式的參數。
- **使用範例**：
  ```
  呼叫 'get_user_stats' 函式，並傳入使用者 ID 'user-123'。
  ```
- **預期輸出**：函式的回傳結果。

### 儲存 (Storage)

#### 7. `list_files`

- **功能說明**：列出指定儲存桶 (bucket) 中的所有檔案。
- **參數**：
  - `bucket_name` (字串, 必要): 儲存桶的名稱。
  - `path` (字串, 選用): 儲存桶內的路徑前綴，用以篩選檔案。
- **使用範例**：
  ```
  列出 'avatars' 儲存桶中 'public/' 路徑下的所有檔案。
  ```
- **預期輸出**：一個包含檔案物件的清單。

#### 8. `upload_file`

- **功能說明**：將本地檔案上傳到指定的儲存桶。
- **參數**：
  - `bucket_name` (字串, 必要): 要上傳到的儲存桶名稱。
  - `source_path` (字串, 必要): 本地檔案的絕對路徑。
  - `destination_path` (字串, 必要): 在儲存桶中儲存的相對路徑及檔案名稱。
- **使用範例**：
  ```
  將本地的 '/home/ubuntu/images/profile.png' 檔案上傳到 'avatars' 儲存桶，並命名為 'user-123.png'。
  ```
- **預期輸出**：成功上傳檔案的公開 URL。

#### 9. `download_file`

- **功能說明**：從指定的儲存桶下載檔案到本地。
- **參數**：
  - `bucket_name` (字串, 必要): 要從中下載的儲存桶名稱。
  - `source_path` (字串, 必要): 儲存桶中的檔案路徑。
  - `destination_path` (字串, 必要): 儲存到本地的絕對路徑及檔案名稱。
- **使用範例**：
  ```
  從 'documents' 儲存桶下載 'reports/quarterly-report.pdf' 檔案，並儲存到 '/home/ubuntu/downloads/'。
  ```
- **預期輸出**：成功下載的本地檔案路徑。

#### 10. `delete_files`

- **功能說明**：從指定的儲存桶中刪除一個或多個檔案。
- **參數**：
  - `bucket_name` (字串, 必要): 要從中刪除檔案的儲存桶名稱。
  - `file_paths` (陣列, 必要): 一個包含多個檔案路徑的陣列。
- **使用範例**：
  ```
  從 'images' 儲存桶中刪除 'temp/image1.jpg' 和 'temp/image2.jpg' 這兩個檔案。
  ```
- **預期輸出**：成功刪除的檔案清單。
