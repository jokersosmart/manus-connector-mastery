# Supabase API 從新手到精通指南

**作者：Joker**

歡迎來到「Supabase API 從新手到精通」指南。本指南將帶您踏上一段完整的學習旅程，從 Supabase 的基礎概念開始，逐步深入其核心功能與進階技巧，最終掌握在真實世界場景中靈活應用的能力。無論您是開發新手還是希望將 Supabase 整合到 Manus 工作流程中的資深使用者，這裡都有您需要的知識。

## 第一章：基礎入門 (The Basics)

在深入探索之前，我們需要先打好基礎。本章將介紹 Supabase 是什麼、Manus 連接器的作用，並引導您完成最初的設定。

### 什麼是 Supabase？

Supabase 是一個開源的 Firebase 替代品，它提供了一整套後端即服務 (Backend-as-a-Service, BaaS) 的工具，讓開發者可以快速建構應用程式，而無需從頭開始編寫後端程式碼。其核心服務建立在企業級的開源工具之上，例如用 PostgreSQL 作為資料庫，GoTrue 處理身份驗證，以及自家的儲存解決方案。

### Manus 連接器的角色

Supabase API 連接器是 Manus 與 Supabase 之間的橋樑。它將 Supabase 複雜的 API 請求，封裝成一系列簡單、直觀的自然語言指令。這意味著您可以直接在 Manus 中說「幫我從 users 資料表找出所有使用者」，而無需編寫任何程式碼，連接器會自動為您完成 API 的調用。

### 建立您的第一個 Supabase 專案

1.  前往 [Supabase 官網](https://supabase.com) 並註冊一個帳號。
2.  登入後，點擊「New Project」並選擇一個組織。
3.  為您的專案命名，設定一個安全的資料庫密碼，並選擇離您使用者最近的地區。
4.  點擊「Create new project」，稍待幾分鐘，您的後端就準備就緒了。

### 尋找您的 API 金鑰

專案建立後，您需要 API 金鑰來授權 Manus 連接器存取您的後端。在 Supabase 儀表板的左側選單中，點擊「Settings」圖示，然後選擇「API」。您會在這裡找到 `Project URL`、`anon` 金鑰和 `service_role` 金鑰。在 Manus 中設定連接器時，您將需要用到這些資訊。

## 第二章：核心功能 - 資料管理

資料庫是任何應用的核心。本章將教您如何使用連接器對 Supabase 資料庫執行基本的 CRUD (建立、讀取、更新、刪除) 操作。

### 讀取資料

萬事起頭難，讓我們先從最簡單的操作開始：列出所有的資料表。使用 `list_tables` 工具，您可以快速了解資料庫的結構。接著，`get_rows` 工具是您檢索資料的主要手段。您可以指定資料表、選擇特定欄位、設定篩選條件，甚至對結果進行排序，完全掌控您想看到的資料。

### 建立與修改資料

當需要新增資料時，`insert_rows` 工具就派上用場了。您可以一次插入單筆或多筆資料，極具彈性。而 `update_rows` 工具則讓您能夠根據特定條件修改已存在的資料，例如更新使用者個人資料或訂單狀態。最後，當某些資料不再需要時，`delete_rows` 可以幫助您安全地將其移除。

### 實戰演練：待辦事項清單

讓我們來建立一個簡單的待辦事項 (To-Do) 清單應用。首先，在 Supabase 儀表板建立一個名為 `todos` 的資料表，包含 `id`、`task` (任務內容)、`is_completed` (是否完成) 和 `created_at` (建立時間) 等欄位。然後，您就可以使用 Manus 指令來管理您的待辦事項了：

-   **新增任務**：「在 `todos` 資料表新增一筆任務，內容是『完成 Supabase 指南的學習』。」
-   **查看任務**：「幫我看看 `todos` 資料表裡所有還沒完成的任務。」
-   **標示完成**：「把 `todos` 資料表中 ID 為 3 的任務狀態更新為已完成。」
-   **刪除任務**：「刪除 `todos` 資料表中所有已完成的任務。」

## 第三章：進階技巧

掌握了基本操作後，是時候探索一些能讓您工作效率倍增的進階技巧了。

### 處理複雜查詢

Supabase 的強大之處在於其底層的 PostgreSQL。雖然連接器簡化了操作，但您仍然可以透過其參數執行複雜的查詢，例如查詢關聯資料表中的資料。這讓您能夠處理更複雜的資料模型，例如一個包含使用者和其文章的部落格系統。

### 執行伺服器端邏輯

有時，您需要在資料庫端執行一些自訂的商業邏輯。這時，PostgreSQL 的函式 (Functions) 就非常有用。您可以使用 `call_function` 工具來觸發這些函式，執行像是計算使用者積分、產生報告等伺服器端任務，而無需將大量資料傳輸到客戶端。

### 檔案儲存管理

除了資料庫，Supabase 還提供了強大的檔案儲存 (Storage) 功能。連接器對此也提供了完整的支援，包含 `list_files`、`upload_file`、`download_file` 和 `delete_files` 等工具。您可以輕鬆地管理使用者頭像、上傳的檔案或任何其他媒體資源。

## 第四章：實戰應用與最佳實踐

理論結合實踐，才能真正內化知識。本章將展示如何在真實世界的場景中應用您所學的技能。

### 場景一：自動化每日銷售報告

想像一下，您需要每天從 `orders` 資料表中提取當日的銷售總額，並產生一份報告。您可以設定一個 Manus 的排程任務，每天定時執行一個指令：「呼叫 `calculate_daily_sales` 函式，並將結果儲存到 `daily_reports` 資料表中。」這整個過程完全自動化，無需人工介入。

### 場景二：簡易部落格後端

您可以使用 Supabase 作為部落格的後端。建立 `posts` 和 `authors` 兩個資料表。當您想發布新文章時，只需對 Manus 說：「在 `posts` 資料表新增一篇文章，標題是『我的 Supabase 學習心得』，內容是...，作者 ID 是...。」讀者瀏覽文章時，也可以透過連接器輕鬆地獲取文章內容和作者資訊。

### 安全性是第一要務

在享受 Supabase 帶來的便利時，切勿忽視安全性。**列級安全性 (Row Level Security, RLS)** 是 Supabase 安全模型的核心。請務必為您的資料表啟用 RLS，並設定精細的存取策略 (Policy)，確保使用者只能存取他們被授權的資料。連接器會完全遵循您設定的 RLS 策略。

## 結語：您的精通之路

恭喜您完成了本指南的學習！從基礎設定到進階應用，您已經全面了解了如何透過 Manus Supabase API 連接器來駕馭您的後端。但精通之路永無止境，Supabase 的生態系仍在不斷發展，我們鼓勵您持續探索、動手實踐，並將您的學習成果分享給社群。現在，就開始您的下一個專案吧！
