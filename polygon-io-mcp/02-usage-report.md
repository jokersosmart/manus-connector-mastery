> **核心摘要**：Manus for Polygon.io 的使用，是圍繞著一系列原子化的、目標明確的數據獲取工具展開的。從 `get_quote` 的即時價格，到 `get_aggregates` 的歷史趨勢，再到 `get_financials` 的基本面數據，共同構成了一個全面的市場數據矩陣。其架構，是將使用者的自然語言請求（如「蘋果股價」），精準地轉譯為對特定 Polygon.io API 端點的調用，並將返回的、高度結構化的 JSON 數據，進行格式化、視覺化或摘要化，以適應不同的業務場景和使用者需求。

---

## 1. 架構概覽 (Architecture Overview)

Manus for Polygon.io 的互動架構，是一個典型的「查詢-轉譯-執行-呈現」模型，旨在將複雜的金融數據 API，封裝成易於使用的自然語言工具。

1.  **輸入層 (Input Layer)**: 使用者，透過自然語言，提出一個關於市場數據的請求。這個請求，可以非常具體（例如，「`獲取 AAPL 從 2023 年 1 月 1 日到現在的日線數據`」），也可以相對模糊（例如，「`最近特斯拉有什麼新聞？`」）。

2.  **意圖識別與實體提取層 (Intent Recognition & Entity Extraction Layer)**: Manus 的 NLU 引擎，解析使用者的請求，並從中提取關鍵資訊：
    *   **金融標的 (Ticker)**: `AAPL`, `TSLA`, `BTC-USD`
    *   **數據類型 (Data Type)**: `股價`, `新聞`, `財報`
    *   **時間範圍 (Time Range)**: `昨天`, `過去一年`, `從 2023-01-01 至今`
    *   **其他參數 (Other Parameters)**: `日線`, `收盤價`

3.  **工具選擇與參數構建層 (Tool Selection & Parameter Mapping)**: 根據識別出的意圖和實體，Manus 會選擇最匹配的 Polygon.io MCP 工具。例如：
    *   「股價」 -> `get_quote`
    *   「歷史走勢」 -> `get_aggregates`
    *   「新聞」 -> `get_news`
    Manus 會將提取出的實體，轉換為該工具所需的標準化參數（例如，將「昨天」轉換為 `YYYY-MM-DD` 格式的日期）。

4.  **執行與數據獲取層 (Execution & Data Fetching Layer)**: Manus 調用選定的工具，向 Polygon.io 的 API 端點，發起一個或多個 HTTP 請求。它會處理所有底層的細節，如 API 金鑰的認證、請求頭的設定，以及速率限制的處理。

5.  **數據處理與呈現層 (Data Processing & Presentation Layer)**: Manus 接收到來自 Polygon.io 的原始 JSON 數據後，會根據使用者的原始請求和數據本身的特性，進行後處理：
    *   **格式化 (Formatting)**: 將時間戳轉換為人類可讀的日期，將巨大的數字，格式化為帶有千位分隔符的字串。
    *   **視覺化 (Visualization)**: 如果請求的是歷史數據，Manus 會自動調用其圖表生成能力，將時間序列數據，繪製成線圖或 K 線圖。
    *   **摘要化 (Summarization)**: 如果請求的是財報或新聞等長文本數據，Manus 會利用大型語言模型 (LLM)，提取核心要點，生成簡潔的摘要。
    *   **整合 (Aggregation)**: 如果一個請求，需要調用多個工具（例如，同時查詢價格和新聞），Manus 會將來自不同來源的結果，整合到一個統一的回覆中。

這個架構的優美之處，在於它將**數據的獲取、處理和呈現，這三個原本分離的步驟，無縫地整合在了一起**，為使用者，提供了一個端到端的、流暢的數據探索體驗。

## 2. 核心工具使用詳解 (Core Tools Deep Dive)

以下表格，詳細說明了 Manus for Polygon.io 的幾個核心工具，及其在實際工作中的應用。

| 工具名稱 (Tool Name) | 核心用途 (Core Purpose) | 關鍵輸入參數 (Key Input Parameters) | 輸出結果 (Output) | 使用範例 (Example Scenario) |
| :--- | :--- | :--- | :--- | :--- |
| `get_quote` | **獲取即時行情** | `ticker`: 金融標的代碼，如 `AAPL`, `C:EUR-USD` | 包含最新買價、賣價、成交價、成交量等即時數據的 JSON 物件。 | 一位交易員，在下單前，需要快速確認某支股票的當前市場價格。 |
| `get_aggregates` | **獲取歷史 K 線數據** | `ticker`: 標的代碼<br>`from`: 開始日期 (YYYY-MM-DD)<br>`to`: 結束日期 (YYYY-MM-DD)<br>`timespan`: 時間間隔，如 `day`, `hour`, `minute` | 一個包含多個時間點的開盤價 (o)、收盤價 (c)、最高價 (h)、最低價 (l) 和成交量 (v) 的數據陣列。 | 一位分析師，需要繪製某支股票過去三年的週線圖，以分析其長期趨勢。 |
| `get_ticker_details` | **獲取公司基本資訊** | `ticker`: 標的代碼 | 包含公司全名、總部地址、行業分類、上市日期、市值、員工總數等靜態資訊的 JSON 物件。 | 在進行公司研究時，需要快速了解一家公司的基本概況。 |
| `get_news` | **獲取相關新聞** | `ticker`: 標的代碼 (可選)<br>`limit`: 返回的新聞數量 (預設 50) | 一個新聞文章列表，每篇文章包含標題、發布者、發布時間、文章 URL 和摘要。 | 當一支股票，價格出現異常波動時，需要快速瀏覽相關新聞，以尋找可能的驅動因素。 |
| `get_financials` | **獲取標準化財報** | `ticker`: 標的代碼<br>`timeframe`: 財報週期，`annual` (年報) 或 `quarterly` (季報) | 包含資產負債表、損益表、現金流量表中，數百個標準化財務指標的複雜 JSON 物件。 | 一位基本面分析師，需要對一家公司，進行深入的財務健康狀況分析和估值建模。 |

## 3. 典型工作流 (Typical Workflows)

### 工作流一：每日市場概覽 (Daily Market Briefing)

這是一個簡單但非常實用的工作流，用於快速了解市場動態。

1.  **使用者**: 「`早上好 Manus，請給我一份市場晨報，包括標準普爾 500 指數的昨日表現、今天開盤前的股指期貨情況，以及蘋果和 Google 的最新新聞。`」
2.  **Manus**: (內部並行執行)
    *   `get_quote("SPY")` (獲取昨日收盤價)
    *   `get_quote("ES=F")` (獲取標普 500 期貨即時價格)
    *   `get_news("AAPL", limit=3)`
    *   `get_news("GOOGL", limit=3)`
3.  **Manus**: (返回一個整合的卡片)
    *   **市場指數**：SPY 昨日收盤於...，上漲/下跌...。當前 E-mini 標普 500 期貨報價...
    *   **蘋果 (AAPL) 最新新聞**：[新聞標題 1]... [新聞標題 2]...
    *   **Alphabet (GOOGL) 最新新聞**：[新聞標題 1]... [新聞標題 2]...

### 工作流二：競爭對手股價監控與警報 (Competitor Stock Price Monitoring & Alerting)

這個工作流，展示了如何利用 Manus，進行自動化的市場監控。

1.  **設定 (Setup)**: 一位在福特汽車工作的策略分析師，設定了一個監控任務：「`Manus，請幫我監控通用汽車 (GM) 的股價。如果其日跌幅超過 5%，請立即在 Slack 的 #competitor-insights 頻道通知我。`」
2.  **執行 (Execution)**: Manus 在後台，創建一個定時任務（例如，每 15 分鐘運行一次）。
    1.  **調用 `get_quote("GM")`**: 獲取 GM 的即時價格和昨日收盤價。
    2.  **計算日跌幅**: `(current_price - previous_close) / previous_close`。
    3.  **條件判斷**: 如果計算出的跌幅小於 -0.05，則觸發警報條件。
3.  **行動 (Action)**: Manus 調用 Slack MCP 工具，在指定的頻道，發送一條訊息：「`警報：通用汽車 (GM) 股價今日已下跌超過 5%！當前價格：...`」

### 工作流三：互動式財報分析 (Interactive Financial Analysis)

這個工作流，展示了 Manus 如何作為一個強大的分析助手，輔助專業人士，進行深入研究。

1.  **分析師**: 「`Manus，請幫我獲取 Nvidia (NVDA) 最近一次的季度財報。`」
2.  **Manus**: (內部執行 `get_financials("NVDA", timeframe="quarterly")`) 返回一個包含數百個數據點的摘要連結或可展開的物件。
3.  **分析師**: 「`很好。從這份財報中，幫我提取出「收入」、「淨利潤」和「毛利率」，並計算它們的同比增長率。`」
4.  **Manus**: (在上下文中，對已獲取的財報數據，進行解析和計算) 返回一個簡潔的表格：

| 指標 | 本季數值 | 去年同期 | 同比增長 |
| :--- | :--- | :--- | :--- |
| 收入 | ... | ... | +XX% |
| 淨利潤 | ... | ... | +YY% |
| 毛利率 | ... | ... | +ZZ bps |

5.  **分析師**: 「`非常棒。現在，幫我把 Nvidia 過去八個季度的收入，繪製成一張柱狀圖。`」
6.  **Manus**: (再次調用 `get_financials`，但這次循環獲取過去八個季度的數據，然後調用其視覺化引擎) 返回一張清晰的柱狀圖，直觀地展示了公司的營收增長趨勢。
