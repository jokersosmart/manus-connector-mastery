# Stripe API 連結器：從新手到精通

作者：Joker

## 前言：改變您與支付互動的方式

歡迎來到「Stripe API 連結器：從新手到精通」指南。本指南的目的，不是要帶您逐一學習 Stripe 龐大 API 的每一個細節，恰恰相反，我們的目標是讓您徹底忘掉那些複雜的 API 調用。

Stripe API 連結器的核心哲學是**「場景抽象」**。我們深入研究了開發者在整合支付功能時最常見、最耗時的場景，並將它們抽象成簡單、直觀的自然語言指令。您不再需要關心 `PaymentIntents` 的狀態轉換，也不必費心手動建立 `Product` 和 `Price` 物件。您只需要告訴 Manus 您想做什麼，剩下的交給我們。

本指南將帶您走過一條精心設計的學習路徑，從最基礎的「5 分鐘收款」到進階的「自動化訂閱管理」與「強力搜尋」，最終讓您掌握利用本連結器高效處理任何支付相關任務的能力。

準備好用一種全新的、更高效的方式與 Stripe 互動了嗎？讓我們開始吧。

---

## 第一章：您的第一個支付連結 (5 分鐘上手)

對於許多創業者、獨立開發者或行銷人員來說，最迫切的需求莫過於「如何快速開始收款」。傳統上，這可能意味著閱讀數十頁文件、編寫後端程式碼來建立產品、價格，最後才能生成一個支付會話 (Checkout Session)。

Stripe API 連結器將這個過程簡化為一個指令。

### 核心工具：`create_payment_link`

這個工具是我們「場景抽象」哲學的最佳體現。它將建立產品、建立價格、建立支付連結這三個步驟合而為一。您只需要提供最核心的兩項資訊：產品名稱和價格。

#### 場景：為您的新電子書收款

假設您剛剛完成一本名為《The Ultimate Guide to AI Agents》的電子書，定價為 49.99 美元，您希望立刻在社群媒體上分享一個購買連結。

您只需對 Manus 說：

> "Create a Stripe payment link for a product called 'The Ultimate Guide to AI Agents' at $49.99."

Manus 在背後會自動完成以下操作：

1.  **檢查** 是否已有名為「The Ultimate Guide to AI Agents」的 `Product`。
2.  如果沒有，**建立** 一個新的 `Product`。
3.  **建立** 一個與該產品關聯的、金額為 4999 美分 (USD) 的 `Price` 物件。
4.  使用該 `Price` **建立** 一個 `PaymentLink` 物件。
5.  **回傳** 給您一個可直接使用的支付連結 URL。

整個過程無需您編寫一行程式碼，也無需登入 Stripe 後台手動操作。這就是場景抽象的力量：專注於您的**意圖**（收款），而不是技術**實現**（API 調用）。

### 實踐練習

1.  嘗試為一個您自己的虛構產品（例如「一小時諮詢服務」）建立一個支付連結。
2.  建立一個允許客戶自行決定購買數量的支付連結（提示：參考 `02-usage-report.md` 中 `create_payment_link` 的 `quantity_adjustable` 參數）。

在下一章，我們將學習如何管理透過這些連結產生的客戶和訂單，進入日常營運的世界。

---

## 第二章：客戶管理與基礎報告

成功產生第一個支付連結後，您很快就會迎來第一批客戶。接下來的日常營運中，您需要知道「誰是我的客戶？」以及「他們購買了什麼？」。本章將介紹如何使用連結器來管理客戶資訊和查詢交易紀錄。

### 核心工具：`create_customer`, `list_customers`, `list_payment_intents`

#### 場景：建立客戶檔案並查詢交易

雖然 `create_payment_link` 會為一次性購買的客戶自動建立訪客記錄，但主動管理客戶資訊對於建立長期關係至關重要。例如，您可能在線下認識了一位潛在客戶，並希望手動將他加入您的系統中，以便後續發送發票或建立訂閱。

**1. 建立客戶**

> "Create a new customer named 'Jane Doe' with the email 'jane.doe@example.com'."

這個指令會呼叫 `create_customer` 工具，在您的 Stripe 帳戶中建立一個新的客戶檔案。擁有結構化的客戶列表是後續進行精準行銷和客製化服務的基礎。

**2. 查詢客戶**

當您的客戶數量增長後，您需要一種快速找到特定客戶的方法。

> "Find the customer with the email 'jane.doe@example.com'."

或者，如果您想查看最近註冊的所有客戶：

> "List my 10 most recent customers."

這兩個指令都利用了 `list_customers` 工具，後者可以透過 `email` 或 `limit` 參數進行篩選和分頁，讓您能輕鬆瀏覽整個客戶群。

**3. 查看交易紀錄**

了解客戶的購買歷史是另一個關鍵的營運任務。`list_payment_intents` 工具可以讓您一覽所有的交易紀錄。

> "Show me my last 5 successful payments."

這個指令會查詢所有狀態為 `succeeded` 的 `PaymentIntent` 物件。您可以進一步的篩選，例如查詢某個特定客戶的所有交易，或者某個特定時間範圍內的收入。

### 實踐練習

1.  將您自己作為一個客戶新增到 Stripe 中。
2.  嘗試列出您帳戶中的所有客戶。
3.  (進階) 思考一下，如果您想「查找過去一個月內所有來自加拿大的失敗交易」，您會如何對 Manus 下指令？這將涉及到對 `list_payment_intents` 更複雜的篩選，我們將在後續章節探討如何透過 `search` 工具實現這種進階查詢。

在下一章，我們將從一次性交易邁向建立可持續收入的基石：訂閱制服務。
